# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type UserEntity implements IUser {
  id: ID!
  role: String!
  firstName: String!
  lastName: String!
  email: String!
  password: String
  phone: String!
  isEmailVerified: Boolean
  emailVerificationToken: String
  emailVerificationExpires: DateTime
  resetPasswordToken: String
  resetPasswordExpires: DateTime
  otpCode: String
  otpExpires: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
}

interface IUser {
  id: ID!
  role: String!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AuthResponse {
  success: Boolean!
  message: String
  token: String
  user: UserEntity
}

type OtpResponse {
  success: Boolean!
  message: String
  otpId: String
}

type ShippingAddress {
  street: String!
  city: String!
  state: String
  postalCode: String!
  country: String!
}

type Creator implements IUser {
  id: ID!
  role: String!
  name: String!
  books: [Book!]!
}

type Book {
  book_id: String!
  title: String!
  year: String!
  isBorrowed: Boolean!
  creator: [Creator!]!
}

type Cart {
  cart_id: String!
  user_id: String!
  items: [Book!]!
  shipping_address: ShippingAddress!
}

type Product {
  id: String!
  name: String!
  description: String!
  price: Float!
  stock: Int!
  category: String!
  brand: String!
  image: String
  rating: Float
  reviewCount: Int
  isActive: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type PaginationInfo {
  page: Int!
  limit: Int!
  total: Int!
  totalPages: Int!
  hasNext: Boolean!
  hasPrev: Boolean!
}

type PaginatedProducts {
  products: [Product!]!
  pagination: PaginationInfo!
}

type Order {
  order_id: String!
  user_id: String!
  itemIds: [String!]!
  total_price: Float!
  status: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}

input ShippingAddressInput {
  street: String!
  city: String!
  state: String
  postalCode: String!
  country: String!
}

type Query {
  getUsers: [UserEntity!]!
  getUser(id: String!): UserEntity
  cart(id: String!): Cart!
  books: [Book!]!
  book(id: String!): Book!
  creators: [Creator!]!
  creator(id: String!): Creator!
  products(filter: ProductFilterInput, pagination: PaginationInput, sort: ProductSortInput): PaginatedProducts!
  product(id: String!): Product!
  categories: [String!]!
  brands: [String!]!
  productsByCategory(category: String!): [Product!]!
  productsByBrand(brand: String!): [Product!]!
  searchProducts(query: String!): [Product!]!
  search(searchInput: SearchInput!): [SearchResult!]!
  order(id: String!): Order!
}

input ProductFilterInput {
  searchKey: String
  category: String
  brand: String
  minPrice: Float
  maxPrice: Float
  minRating: Float
  inStock: Boolean
  isActive: Boolean
}

input PaginationInput {
  page: Int! = 1
  limit: Int! = 10
}

input ProductSortInput {
  sortBy: String
  sortOrder: String
}

union SearchResult = Creator | Book

input SearchInput {
  searchKey: String!
  paginate: PaginationInput!
}

type Mutation {
  register(registerInput: RegisterDto!): AuthResponse!
  login(loginInput: LoginDto!): AuthResponse!
  verifyEmail(otpCode: String!, userId: String!): AuthResponse!
  forgotPassword(forgotPasswordDto: ForgotPasswordDto!): AuthResponse!
  resetPassword(resetPasswordDto: ResetPasswordDto!): AuthResponse!
  sendOtp(email: String!): OtpResponse!
  verifyOtp(verifyOtpDto: VerifyOtpDto!): AuthResponse!
  resendOtp(resendOtpDto: ResendOtpDto!): OtpResponse!
  createUser(input: CreateUserDto!): UserEntity!
  updateUser(input: UpdateUserDto!): UserEntity!
  deleteUser(id: String!): Boolean!
  createCart(createCartInput: CreateCartInput!): Cart!
  updateCart(updateCartInput: UpdateCartInput!): Cart!
  removeCart(id: String!): Cart!
  createBook(createBookInput: CreateBookInput!): Book!
  updateBook(input: UpdateBookInput!): Book!
  removeBook(id: String!): Book!
  createCreator(createCreatorInput: CreateCreatorInput!): Creator!
  updateCreator(updateCreatorInput: UpdateCreatorInput!): Creator!
  removeCreator(id: String!): Creator!
  createProduct(createProductInput: CreateProductInput!): Product!
  updateProduct(updateProductInput: UpdateProductInput!): Product!
  removeProduct(id: String!): Product!
  clearSearchHistory(searchInput: SearchInput!): Boolean!
  createOrder(createOrderInput: CreateOrderInput!): Order!
  updateOrder(updateOrderInput: UpdateOrderInput!): Order!
  removeOrder(id: String!): Order!
}

input RegisterDto {
  firstName: String!
  lastName: String!
  email: String!
  password: String!
  phone: String!
  role: String! = "USER"
}

"""Input should be as string trimed to success the operation"""
input LoginDto {
  email: String!
  password: String!
}

input ForgotPasswordDto {
  email: String!
}

input ResetPasswordDto {
  token: String!
  newPassword: String!
}

input VerifyOtpDto {
  email: String!
  otpCode: String!
}

input ResendOtpDto {
  email: String!
}

input CreateUserDto {
  firstName: String!
  lastName: String!
  email: String!
  password: String!
  phone: String!
  shippingAddress: ShippingAddressInput
  role: String!
}

input UpdateUserDto {
  id: String!
  firstName: String
  lastName: String
  email: String
  password: String
  phone: String
  isEmailVerified: Boolean
  emailVerificationToken: String
  emailVerificationExpires: DateTime
  resetPasswordToken: String
  resetPasswordExpires: DateTime
  otpCode: String
  otpExpires: DateTime
}

input CreateCartInput {
  cart_id: ID
  user_id: String!
  items: [CreateBookInput!]
  shipping_address: ShippingAddressInput
}

"""
This mutation responsable to add a new book to the libarary, all field are required 
"""
input CreateBookInput {
  book_id: String!
  title: String!
  year: String!
  isBorrowed: Boolean!
  creatorId: [String!]!
}

input UpdateCartInput {
  cart_id: ID
  user_id: String
  items: [CreateBookInput!]
  shipping_address: ShippingAddressInput
  id: String!
}

input UpdateBookInput {
  book_id: String!
  title: String
  year: String
  isBorrowed: Boolean
  creatorId: [String!]
}

input CreateCreatorInput {
  name: String!
  books_ids: [String!]!
}

input UpdateCreatorInput {
  name: String
  books_ids: [String!]
  id: String!
}

input CreateProductInput {
  name: String!
  description: String!
  price: Float!
  stock: Int!
  category: String!
  brand: String!
  image: String
  rating: Float
  reviewCount: Int
  isActive: Boolean! = true
}

input UpdateProductInput {
  name: String
  description: String
  price: Float
  stock: Int
  category: String
  brand: String
  image: String
  rating: Float
  reviewCount: Int
  isActive: Boolean = true
  id: String!
}

input CreateOrderInput {
  """Order ID"""
  id: String!
  cartId: String!
  userId: String!
}

input UpdateOrderInput {
  """Order ID"""
  id: String!
  cartId: String
  userId: String
}